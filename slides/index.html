<!doctype html>
<!--Reveal.js:
- Press 's' to open speaker-notes pop-up window
- Press ESC to enter the slide overview- Press 'b' to fade out to black screen
- Change the background on a slide: <!-- .slide: data-background="#ff0000" -- >
- PDF export using Chrome: https://github.com/hakimel/reveal.js/#pdf-export
    + append 'index.html?print-pdf' and scroll to the end before printing

TODO:
- lien vers web app Python
- pip install braindump
- pr√©parer / r√©p√©ter 2 d√©mos
-->
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>PyConFr 2017 - Mindmap web contr√¥l√©e par sms avec Python &amp; Twilio</title>

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/solarized.css">
        <!-- Theme used for syntax highlighting of code -->
        <link rel="stylesheet" href="lib/css/zenburn.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

        <style>
        .reveal section img {
          border: none;
          box-shadow: none;
        }
        p > code, li > code {
          color: #D05;
        }
        </style>

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section data-markdown data-separator="^\n\n\n" data-separator-vertical="^\n\n" data-notes="^Note:" data-charset="utf-8">
                    <textarea data-template>
## Mindmap web contr√¥l√©e par sms

<img src="CargoCultFeaturePhone.jpg" alt="Fac-simile de portable en bois" style="height: 30rem">

<small>24/09/2017 @ PyConFr</small>



## Bonjour !

<img src="avatar.jpg" alt="Une image d'avatar" style="border: none; width: 15%">

- <i class="fa fa-map-marker"></i> Nantes
- <i class="fa fa-pencil"></i> https://chezsoi.org + <i class="fa fa-rss"></i> [<img src="shaarli-icon.png" style="margin: 0; width: 3rem">](https://chezsoi.org/shaarli)
- <i class="fa fa-code"></i> @ [Voyages-Sncf.com](https://open.voyages-sncf.com)



## Mon t√©l√©phone est stupide
**Pourquoi ?**
<ul>
  <li class="fragment"><span style="color:#2aa198">**zen**</span> : je peux m'en passer, moins de [FOMO](https://fr.wikipedia.org/wiki/Fear_of_missing_out)</li>
  <li class="fragment"><span style="color:#6c71c4">**√©conomique** </span> : je pr√©f√®re d√©penser mes sous ailleurs</li>
  <li class="fragment"><span style="color:LimeGreen">**√©colo**</span> : resources pour le fabriquer + √©lectricit√©</li>
  <li class="fragment"><span style="color:#dc322f">**raison n¬∞1**</span> : j'en perds plusieurs par an</li>
</ul>



## Probl√®me : o√π noter des trucs ?
- pas d'appli, pas de connexion Internet
- **brouillons ?** ‚Üí je les perds tous avec le t√©l√©phone,
et c'est p√©nible √† recopier
- **notes papier ?** ‚Üí c'est le bordel, et il faut les recopier...



## üí° twilio !
```python
client = Client(TWILIO_ACCOUNT_SID, TWILIO_AUTH_TOKEN)
client.messages.create(body=msg, from_=src_number, to=dst_number)
```
<small>([exemple complet](https://github.com/Lucas-C/linux_configuration/blob/master/languages/python/send_text_msg_with_twilio.py))</small>

<div class="fragment">
  <span style="color:#dc322f"><i class="fa fa-exclamation mark"></i> _**Disclaimer**_ <i class="fa fa-exclamation mark"></i></span>
  [twilio](https://www.twilio.com) n'est pas le seul, il y a aussi: [bandwidth](https://my.bandwidth.com/portal/apidoc/2-x-supported-operations.htm), [bulksms](http://www.bulksms.com/products/sms-api.htm), [nexmo](https://www.nexmo.com/products/sms), [plivo](https://www.plivo.com/sms-api/), [sinch](https://www.sinch.com/products/sms-api/), [tropo](https://www.tropo.com/docs/scripting/quickstarts/sending-text-messages#tabs-4)
</div>

Note:
- 1√®re utilisation : envoyer un texto √† ma copine √† Dublin... comme j'avais perdu mon t√©l√©phone
- 2 ans de "Free Trial"
- utilisation + intensive -> ~30$ par an



## Fontionne par webhook
<img src="Piratey-from-wikimedia.png" alt="Capitaine Crochet - le retour" style="max-height: 30rem">

<img src="https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/sms-http-request-cycle.width-800.gif"
     alt="Sch√©ma anim√© expliquant le principe des webhooks"
     class="fragment" style="position: fixed; bottom: 5%; left: 50%; transform: translateX(-50%);">



## O√π stocker ces notes ?

<img src="git-logo.jpg" style="max-height:10rem">

<img class="fragment" src="gitlab-logo.svg" style="max-height:10rem">


Note: les gens hurlent ? oui mais versionning + interface web d'√©dition !



## Mise en place

<img src="uwsgi-logo.png" alt="Logo uwsgi" style="width: 20rem">

Note: heroku Ok



## D√©mo

<img src="Cute_Kitten_Please.jpg" alt="Logo uwsgi" style="width: 30rem">



## Tr√®s vite...
<pre style="padding: 5px">
penser √† ...
m√©nage
truc √† faire ...
envoyer <chose> √† machin...
lire cet article de sam&max...
m√©nage: urgent
boulot: oubli pdb ?
finir pull request Shaarli
rendre livres √† la bibli
r√©server vacs
contrib wikip√©dia
rendre blog accessible
accrocher le cadre dans l'entr√©e
nourrir le chat
marquepager dernier lien de sebsauvage
anniv soeur: c'√©tait hier ?
entretien voiture
faille s√©cu: systemshock?
changer de t√©l
blog: suppr. compteur visites -> d√©primant
jdr: tuer les PJs
m√©nage: !FAIT QQCH!!
</pre>



## üí° mindmap !

J'utilisais [freeplane](https://www.freeplane.org) : <img src="freeplane-logo-2014.png" alt="Logo de freeplane" style="vertical-align: middle; width: 6rem"> <img src="FreePlane-200-175.png" alt="Logo 2 de reeplane" style="vertical-align: middle; width: 6rem">

<img src="freeplane-mindmap-linxufr-sebsauvage.png" alt="Capture d√©cran de freeplane" style="max-height: 30rem">



## Oui mais...

- appli de bureau (pas web) en Java
- ne mange pas de simple fichier texte :(



## üí° wisemapping !

<img src="wisemapping-logo.png" style="vertical-align: middle"> <img src="wisemapping-screenshot.png" style="vertical-align: middle">

- open-source
- utilis√© par [Framasoft](https://framasoft.org/)
- la partie "front" mange des fichiers XML simples



## Extraction du _viewer_

![](CyanideHappinessCrazyTyping.gif)

- _cf._ [article de blog](https://chezsoi.org/lucas/blog/rendering-deep-text-based-mindmaps-with-wisemapping-and-python.html)
- <span style="font-size: 1.8rem">https://github.com/Lucas-C/wisemapping-mindmap-viewer</span>

Note: √ßa va pas vous int√©resser, c'est du JS



## Conversion .md ‚Üí .xml

![](kaa-and-mowgli.webp)

- en Python, avec [pyparsing](http://pyparsing.wikispaces.com)
- `pip install braindump`



## Conversion .md ‚Üí .xml

Ex√©cut√©e via `post-receive` hook par Gitlab:

`/var/opt/gitlab/git-data/repositories/$group/$repo.git/custom_hooks`

```
#!/bin/bash
cd "$(dirname "${BASH_SOURCE[0]}" )"
exec > post-receive.log; exec 2>&1
cd ..
GITLAB_PUBLIC=/opt/gitlab/embedded/service/gitlab-rails/public
mindmap=braindump.md
read old_sha new_sha branch_name
git show $new_sha:$mindmap > $mindmap
LANG=fr_FR.UTF-8 wisemapping_txt2xml.py --font-color white $mindmap \
  > $GITLAB_PUBLIC/wisemapping-simple-viewer/samples/${f%.*}.xml
rm $mindmap
```

Note: pas le meilleur parseur...



## D√©mo

<img class="fragment" src="its-alive.gif" alt="Jim Carray saying 'it's alive!'" style="width: 40rem">



## That's all folks !

<img alt="Mr. Bean tire avec un pistolet sur une ampoule pour √©teindre la lumi√®re" src="MrBeanSwitchOff.gif" style="width: 80%">

                    </textarea data-template>
                </section>
            </div>
        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>
            // More info about config & dependencies:
            // - https://github.com/hakimel/reveal.js#configuration
            // - https://github.com/hakimel/reveal.js#dependencies
            Reveal.initialize({

                history: true,

                dependencies: [
                    { src: 'plugin/markdown/marked.js' },
                    { src: 'plugin/markdown/markdown.js' },
                    { src: 'plugin/notes/notes.js', async: true },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
                ]
            });
        </script>
    </body>
</html>
